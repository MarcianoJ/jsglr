definition
module Unicode

exports
	
	context-free start-symbols
		Range
		
	context-free syntax
		
		PrimitiveRange -> Range
		
		Range "/" PrimitiveRange		-> Range {cons("Difference")}
		Range "\\/" PrimitiveRange		-> Range {cons("Union")}
		Range "/\\" PrimitiveRange		-> Range {cons("Intersection")}
		
		"[" RangeElem+ "]"			-> PrimitiveRange {cons("Range")}
		"[" "ALL" "]"				-> PrimitiveRange {cons("AllRange")}
		
		Unicode				-> RangeElem
		Unicode "-" Unicode -> RangeElem {cons("Interval")}
		
		UnicodeChar2B 	-> Unicode {cons("Char")}
		UnicodeChar4B	-> Unicode {cons("Char")}
		UnicodeVal2B	-> Unicode {cons("Val")}
		UnicodeVal4B	-> Unicode {cons("Val")}
		
	lexical syntax
		%% Support for ASCII encoded Unicode characters
		[\7][\0-\255][\0-\255] -> UnicodeChar2B
		%% Limitation of first byte due to UTF16 encoding
		%% Otherwise grammar is ambigious
		[\7][\200-\255][\0-\255]
		    [\201-\255][\0-\255] -> UnicodeChar4B
		
		%% Support to define Unicode characters by their byte value
		[\\][u][0-9a-f][0-9a-f][0-9a-f][0-9a-f] -> UnicodeVal2B
		[\\][u][0-9a-f][0-9a-f][0-9a-f][0-9a-f]
		       [0-9a-f][0-9a-f][0-9a-f][0-9a-f] -> UnicodeVal4B
		       
		[\ \t\r\n]			-> LAYOUT
		